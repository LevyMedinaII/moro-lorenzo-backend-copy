<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<title>Moro Gym</title>
	<link rel="stylesheet" href="css/styles.css">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
	 crossorigin="anonymous">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
	<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha256-3edrmyuQ0w65f8gfBsqowzjJe2iM6n0nKciPUp8y+7E="
	 crossorigin="anonymous">
	</script>
</head>

<body>
	<div id="container">
		<div class="popup">
			<span class="popuptext" id="myPopup">Member has been successfully added!</span>
		</div>
		<div class="primary-navigation">
			<div class="header-nav">
				<div class="header-nav-img">
				</div>
				<div class="header-nav-title">
					<p class="header-title-text">
						Moro
					</p>
					<p class="header-title-text">
						Lorenzo
					</p>
					<p class="header-title-text">
						Gym
					</p>
				</div>
			</div>
			<div class="nav-buttons">
				<ul>
					<li>
						<a href="home.html">Home</a>
					</li>
					<li>
						<a href="addnew.html" class="active">Add New Member</a>
					</li>
					<li>
						<a href="members.html">List of Members</a>
					</li>
					<li>
						<a href="sales.html">Sales Report</a>
					</li>
					<li>
						<a onclick="logout()">Logout</a>
					</li>
				</ul>
			</div>
		</div>
		<div class="page-content">
			<p class="date">
				<script type="text/javascript">					
					var currentTime = new Date();
					var locale = "en-us";
					var month = currentTime.toLocaleString(locale, { month: "long" });
					var day = currentTime.getDate()
					var year = currentTime.getFullYear()
					document.write(month + " " + day + ", " + year)		
				</script>
			</p>
			<h2 class="page-title">Add New Member</h2>
			<div class="add-new-box">
				<div class="add-photo">
					<a href="" data-toggle="modal" data-target="#exampleModalCenter">
						<img src="photos/addphot.png" alt="addphoto.png">
						<p>click to add photo</p>
					</a>
				</div>
				<div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
					<div class="modal-dialog modal-dialog-centered" role="document">
						<div class="modal-content">
							<div class="modal-header">
								<h3 class="modal-title" id="exampleModalLongTitle">Confirmation Box</h3>
								<button type="button" class="close" data-dismiss="modal" aria-label="Close">
									<span aria-hidden="true">&times;</span>
								</button>
							</div>
							<div class="modal-body">
								<input type="text" class="form-control" id="photofile" placeholder="Photo url" />
							</div>
							<div class="modal-footer">
								<button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
								<button type="button" class="btn btn-primary" data-dismiss="modal" onclick="getPhotoUrl()">Yes</button>
							</div>
						</div>
					</div>
				</div>
				<div class="member-input">
					<input type="text" value="18-01001" readonly id="idnum">
					<br/>
					<input type="text" placeholder="Last Name" id="lastname">
					<input type="text" placeholder="First Name" id="firstname">
					<input type="text" placeholder="M.I." id="mi">
					<br/>
					<input type="text" placeholder="Current Address" id="address">
					<label for="">Sex</label>
					<label class="radio-inline">
						<input type="radio" name="optradio" id="male" value="male">Male
					</label>
					<label class="radio-inline">
						<input type="radio" name="optradio" id="female" value="female">Female
					</label>
					<br/>
					<input type="text" placeholder="Email Address" id="email">
					<input type="text" placeholder="Birthday MM/DD/YYYY" id="birthday">
					<input type="text" placeholder="Work phone" id="work_phone">
					<br/>
					<input type="text" placeholder="Landline" id="landline">
					<input type="text" placeholder="Mobile Number" id="mobilenum">
					<input type="text" placeholder="Emergency Contact" id="emercontact">
					<br/>
					<select class="empty" id="package">
						<option value="" selected disabled>Package Enrolled</option>
						<option value="annual">Annual</option>
						<option value="semi-annual">Semi-annual</option>
						<option value="monthly">Monthly</option>
					</select>
					<input type="date" id="myDate">
					<label for="">to</label>
					<input type="date" id="datepicker">
					<br/>
					<input type="text" placeholder="Any medical problems" id="med-input">
					<select class="empty" id="cardstatus">
						<option value="" selected disabled>Membership Card Status</option>
						<option value="" disabled>Processed</option>
						<option value="Processing">Pending</option>
						<option value="None">Not processed</option>
					</select>
				</div>
			</div>
			<button class="black-solid-btn float-btn" onclick="addMember()">Confirm</button>
		</div>
	</div>
	<script>
		function addMember() {
			var xhttp = new XMLHttpRequest();
			var image = x;
			var idnum = document.getElementById("idnum").value;
			var first_name = document.getElementById("firstname").value;
			var last_name = document.getElementById("lastname").value;
			var middle_initial = document.getElementById("mi").value;
			var address = document.getElementById("address").value;
			var sex = document.querySelector('input[name="optradio"]:checked').value;
			var email = document.getElementById("email").value;
			var birthday = document.getElementById("birthday").value;
			var work_phone = document.getElementById("work_phone").value;
			var landline = document.getElementById("landline").value;
			var mobile_number = document.getElementById("mobilenum").value;
			var emergency_contact_number = document.getElementById("emercontact").value;
			var package_availed = document.getElementById("package").value;
			var contract_begin = document.getElementById("myDate").value;
			var contract_end = document.getElementById("datepicker").value;
			var medical_condition = document.getElementById("med-input").value;
			var membership_card_status = document.getElementById("cardstatus").value;

			xhttp.onreadystatechange = function () {
				if (this.readyState == 4 && this.status == 200) {
					console.log(this.response);
					var popup = document.getElementById("myPopup");
					popup.classList.toggle("show");
				}
			};;
			xhttp.open("POST", "http://moro-system.herokuapp.com/members", true);
			xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
			xhttp.send("photo="+image+"&idnum="+idnum +"&firstname="+first_name+"&lastname="+last_name+"&mi="+middle_initial+"&address="+address+"&sex="+sex +"&email="+email+"&birthday="+birthday+"&landline="+landline+"&mobilenum="+mobile_number+"&emercontact="+emergency_contact_number+"&package="+package_availed+"&startdate="+contract_begin+"&enddate="+contract_end+"&medinput="+medical_condition+"&cardstatus="+membership_card_status);
		}
	</script>
	<script>
		var x = "";
		function getPhotoUrl() {
			x = document.getElementById("photofile").value;
		}
	</script>
	<script>
		function logout() {
			var xhttp = new XMLHttpRequest();
			xhttp.onreadystatechange = function () {
				if (this.readyState == 4 && this.status == 200) {
					location.href = "index.html";
				}
			};
			xhttp.open("POST", "http://moro-system.herokuapp.com/admins/logout", true);
			xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
			xhttp.send();
		}
	</script>
</body>

</html>