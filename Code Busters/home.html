<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<title>Moro Gym</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
	 crossorigin="anonymous">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
	<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha256-3edrmyuQ0w65f8gfBsqowzjJe2iM6n0nKciPUp8y+7E="
	 crossorigin="anonymous">
	</script>

	<link rel="stylesheet" href="css/styles.css">


</head>

<body>
	<div id="container">
		<div class="primary-navigation">
			<div class="header-nav">
				<div class="header-nav-img">
					<img src="photos/Group 38.png" alt="">
				</div>
				<div class="header-nav-title">
					<p class="header-title-text">
						Moro
					</p>
					<p class="header-title-text">
						Lorenzo
					</p>
					<p class="header-title-text">
						Gym
					</p>
				</div>
			</div>
			<div class="nav-buttons">
				<ul id="vertmenu">
					<li>
						<span class="home-link">
							<a href="home.html" class="active">
								<img src="photos/home.png" alt=""> Home</a>
						</span>
					</li>
					<li>
						<span class="add-link">
							<a href="addnew.html">
								<img src="photos/adduser.png" alt="">Add New Member</a>
						</span>
					</li>
					<li>
						<span class="members-link"></span>
						<a href="members.html">
							<img src="photos/list.png" alt="">List of Members</a>
						</span>
					</li>
					<li>
						<span class="sales-link">
							<a href="sales.html">
								<img src="photos/report.png" alt="">Sales Report</a>
						</span>
					</li>
					<li>
						<span class="logout-link">
							<a onclick="logout()">
								<img src="photos/logout.png" alt="">Logout</a>
						</span>
					</li>
				</ul>
			</div>
		</div>
		<div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
			<div class="modal-dialog modal-dialog-centered" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<h3 class="modal-title" id="exampleModalLongTitle">Confirmation Box</h3>
						<button type="button" class="close" data-dismiss="modal" aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
					</div>
					<div class="modal-body">
						<p>Are you sure you want to proceed?</p>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
						<button type="button" class="btn btn-primary" onclick="addvisit()">Yes</button>
					</div>
				</div>
			</div>
		</div>
		<div class="page-content">
			<p class="date">
				<script type="text/javascript">					
					var currentTime = new Date();
					var locale = "en-us";
					var month = currentTime.toLocaleString(locale, { month: "long" });
					var day = currentTime.getDate()
					var year = currentTime.getFullYear()
					document.write(month + " " + day + ", " + year)		
				</script>
			</p>
			<div class="big-box">
				<div class="time-box">
					<label for="time-in" class="time">Time-in:</label>
					<input type="text" id="time-in" class="home" placeholder="Input Name (Surname, Name)">
					<button class="black-solid-btn" data-toggle="modal" data-target="#exampleModalCenter">Enter</button>
					<br/>
					<label for="time-out" class="time">Time-out:</label>
					<input type="text" id="time-out" class="home" placeholder="Input Name (Surname, Name)">
					<button class="black-solid-btn" data-toggle="modal" data-target="#exampleModalCenter">Enter</button>
					<br/>
					<hr/>
					<label for="time-in" class="time">Walk-in Client</label>
					<input type="text" id="w-time-in" class="home" placeholder="Input Name (Surname, Name)">
					<button class="black-solid-btn" data-toggle="modal" data-target="#exampleModalCenter">Enter</button>
					<br/>
					<div class="checkboxes" id="checkboxes">
						<p>
							<label>
								<input type="checkbox" id="boxing" value="boxing" />
								<span>Boxing</span>
							</label>
						</p>
						<p>
							<label>
								<input type="checkbox" id="circuit" value="circuit training" />
								<span>Circuit Training</span>
							</label>
						</p>
						<p>
							<label>
								<input type="checkbox" id="gym" value="gym" />
								<span>Gym</span>
							</label>
						</p>
						<p>
							<label>
								<input type="checkbox" id="yoga" value="yoga" />
								<span>Yoga</span>
							</label>
						</p>
					</div>






				</div>
				<button class="yellow-ghost-btn">
					<a href="seelist.html">See full list</a>
				</button>
			</div>
			<h2>Weekly Report</h2>
			<div id="weekly-report">
				<table class="table table-striped">
					<thead>
						<tr>
							<th>ID Number</th>
							<th>Member's Name</th>
							<th>Expiration Date</th>
							<th>Status</th>
							<th>Contact Number</th>
						</tr>
					</thead>
				</table>
			</div>
		</div>
	</div>
</body>
<script>
	function logout() {
		var xhttp = new XMLHttpRequest();
		xhttp.onreadystatechange = function () {
			if (this.readyState == 4 && this.status == 200) {
				location.href = "index.html";
			}
		};
		xhttp.open("POST", "http://moro-system.herokuapp.com/admins/logout", true);
		xhttp.send();
	}
</script>
<script>
	function addvisit() {
		var xhttp = new XMLHttpRequest();
		var w_time_in = document.getElementById("w-time-in").value;
		var package_walkin = document.getElementById("checkboxes").value;
		xhttp.onreadystatechange = function () {
			if (this.readyState == 4 && this.status == 200) {
				location.href = "home.html";
				alert(this.response);
				alert("success")
			}
		};
		xhttp.open("POST", "http://moro-system.herokuapp.com/visits", true);
		xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
		xhttp.send("w_time_in" + w_time_in + "&package.walkin=" + package_walkin);
	}
</script>
<script>
	function weeklyReport() {
		var xhttp = new XMLHttpRequest();
		xhttp.onreadystatechange = function () {
			if (this.readyState == 4 && this.status == 200) {
				var tbl = $("<table/>").attr("id", "mytable").attr("class", "table table-striped");
				$("#weekly-report").append(tbl);
				$("#mytable").append(`
						<thead>
						<tr>
						<th>ID Number</th>
						<th>Member's Name</th>
						<th>Expiration Date</th>
						<th>Status</th>
						<th>Contact Number</th>
					</tr>
				</thead>`);
				for (var i = 0; i < obj.length; i++) {
					var tr = "<tr>";
					var td1 = "<td>" + obj[i]["id"] + "</td>";
					var td2 = "<td>" + obj[i]["lastname" + " firstname" + " mi"] + "</td>";
					var td3 = "<td>" + obj[i]["contract_end"] + "</td>";
					var td4 = "<td>" + obj[i]["membership_card_status"] + "</td>";
					var td5 = "<td>" + obj[i]["mobile_number"] + "</td></tr>";


					$("#mytable").append(tr + td1 + td2 + td3 + td4 + td5);
				}
			};
			xhttp.open("GET", "http://moro-system.herokuapp.com/members/weekly_report", true);
			xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
			xhttp.send();

			weeklyReport();
		}
	}
</script>

</html>